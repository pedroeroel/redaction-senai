{% extends 'layout.html' %}
{% block pagename %}Nova Redação{% endblock %}
{% block pagetext %}Crie sua redação abaixo{% endblock %}
{% set header = True %}
{% set footer = True %}
{% set main = True %}

{% block content %}

<section class="mb-12 text-center">
    <h2 class="text-3xl font-bold mb-4">Nova Redação</h2>
    <p class="text-gray-300">Preencha os campos abaixo para enviar sua redação.</p>
</section>

<form id="essay-form" action="/new-essay" method="POST"
      class="max-w-2xl mx-auto bg-[#1e1a2b] border border-white/20 shadow-xl rounded-xl p-8 backdrop-blur-lg">

    <div class="mb-6">
        <label for="theme" class="block text-lg font-semibold mb-2">Tema</label>
        <input type="text" id="theme" name="theme" required
               class="text-black w-full rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3D1E8D]">
    </div>

    <div class="mb-6">
        <label for="title" class="block text-lg font-semibold mb-2">Título</label>
        <input type="text" id="title" name="title" required
               class="text-black w-full rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3D1E8D]">
    </div>

    <div class="mb-6">
        <label for="text" class="block text-lg font-semibold mb-2">Texto</label>
        <textarea id="text" name="text" rows="12" required
                  class="text-black w-full rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#3D1E8D]"></textarea>
    </div>

    <button id="send-button" type="submit"
            class="w-full bg-[#3D1E8D] text-white font-bold rounded-lg py-3 hover:bg-[#2a1460] transition">
        Enviar Redação
    </button>

    <div id="loading" class="hidden text-center mt-6">
        <p class="text-lg text-gray-200 mb-2">Analisando sua redação...</p>
        <div class="animate-spin w-10 h-10 border-4 border-purple-400 border-t-transparent rounded-full mx-auto"></div>
    </div>
</form>

<script>
document.getElementById("essay-form").addEventListener("submit", () => {
    document.getElementById("send-button").disabled = true;
    document.getElementById("send-button").innerText = "Enviando...";
    document.getElementById("loading").classList.remove("hidden");
});
</script>

{% endblock %}
